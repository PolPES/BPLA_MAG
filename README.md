# BPLA_MAG
Выпускная квалификационная работа по программе "Беспилотные системы и робототехника в горнодобывающей промышленности"
Егорова Полина Сергеевна, УГГУ, ГИН-21

Этот проект производит обработку и визуализацию магнитных данных из логов магнитометра, прикрепленного к беспилотному летательному аппарату.

При выполнении проекта будут построены следующие графики результатов: 
  "anomaly_time_series.png" - График временного ряда магнитных аномалий. 
  "field_components.png" - График компонентов магнитного поля. 
  "anomaly_map.png" - Карта распределения аномалий.

А также CSV файл со столбцами: 
  "datetime" - Временная метка "Mag1Field" - Значение магнитного поля 
  "Latitude, Longitude" - Координаты в десятичных градусах 
  "Height_m" - Высота в метрах "X_nT, Y_nT, Z_nT" - Компоненты поля 
  "Mag_Anomaly" - Магнитная аномалия

Стек технологий: Visual Studio Code Python 3.11.9 Mission Planner 1.3.81

Необходимые библиотеки: pandas matplotlib.pyplot datetime

Файлы: "MG.txt" - Исходный файл с данными магнитных измерений. "process_magnetic_data.py" - Основной скрипт для обработки данных. "magnetic_data.csv" - Обработанные данные в CSV формате.

Файл с логами "MG" для корректой работы программы должен быть в расширении .txt и иметь следующие заголовки колонок в своей структуре в соответствующем формате: гггг/мм/дд ЧЧ:ММ:СС.ссс MAG1_FIELD ... DDMMSS.ssH DDDMMSS.ssH HHHH ... FGX_nT FGY_nT FGZ_nT ...

Расшифровка заголовков: Первые два поля - дата и время. MAG1_FIELD - значение магнитного поля. DDMMSS.ssH - координаты в формате DMS (градусы, минуты, секунды) с указанием полушария. FGX_nT, FGY_nT, FGZ_nT - компоненты магнитного поля.

Функционал проекта: Основная задача программы - преобразовать сырые данные в удобный для анализа формат, рассчитать магнитные аномалии и наглядно представить результаты с помощью графиков. Программа начинает работу с чтения текстового файла построчно. Каждая строка анализируется на соответствие ожидаемому формату данных - проверяется наличие временной метки. При обнаружении корректной строки происходит её парсинг: извлекается дата и время, значение магнитного поля, географические координаты и компоненты магнитного поля. Координаты преобразуются из формата градусы-минуты-секунды (DMS) в десятичные градусы для удобства дальнейших расчетов. После загрузки всех данных программа вычисляет магнитные аномалии как отклонение каждого измерения от среднего значения магнитного поля. Это позволяет выделить локальные особенности магнитного поля на фоне общего уровня. Все обработанные данные сохраняются в структурированный CSV-файл, содержащий временные метки, координаты, значения поля и рассчитанные аномалии. Визуализация результатов посредством трех типов графиков. Первый график показывает временную динамику магнитных аномалий, что позволяет анализировать изменения поля во времени. Второй график отображает компоненты магнитного поля (X, Y, Z) для более детального анализа его структуры. Третий график представляет собой карту пространственного распределения аномалий.

Кратко:
1.Читает и парсит данные из MG.txt
2.Рассчитывает магнитные аномалии
3.Строит три типа графиков
4.Сохраняет результаты в CSV и PNG
Использование: 1.Установить необходимые библиотеки. 2.Подготовить файл MG.txt в нужном формате. 3.Поместить его в одну папку с проектом. 4.Запустить скрипт. 5.Получить результаты расчета и графики в той же папке.

Прим. такая обработка данных подходит под мультикопторные беспилотные летательные аппараты с выносным на гондолу магнитометром.
